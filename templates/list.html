<html>
<head>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>

<title>Sendball</title>
<link href="https://fonts.googleapis.com/css?family=Montserrat" rel="stylesheet">
<link href="https://fonts.googleapis.com/css?family=Roboto" rel="stylesheet">

<style>

#reload {
    margin-right: 20px;
    float: right;
    font-size: 16px;
    color: #8a8a8a;
    text-decoration: none;
}

a {
    color: #8a8a8a;
    text-decoration: none;
}

.spinner {
  margin: 10px auto;
  width: 50px;
  height: 40px;
  text-align: center;
  font-size: 10px;
  display: none;
}

.spinner > div {
  background-color: #333;
  height: 100%;
  width: 6px;
  display: inline-block;

  -webkit-animation: sk-stretchdelay 1.2s infinite ease-in-out;
  animation: sk-stretchdelay 1.2s infinite ease-in-out;
}

.spinner .rect2 {
  -webkit-animation-delay: -1.1s;
  animation-delay: -1.1s;
}

.spinner .rect3 {
  -webkit-animation-delay: -1.0s;
  animation-delay: -1.0s;
}

.spinner .rect4 {
  -webkit-animation-delay: -0.9s;
  animation-delay: -0.9s;
}

.spinner .rect5 {
  -webkit-animation-delay: -0.8s;
  animation-delay: -0.8s;
}

@-webkit-keyframes sk-stretchdelay {
  0%, 40%, 100% { -webkit-transform: scaleY(0.4) }
  20% { -webkit-transform: scaleY(1.0) }
}

@keyframes sk-stretchdelay {
  0%, 40%, 100% {
    transform: scaleY(0.4);
    -webkit-transform: scaleY(0.4);
  }  20% {
    transform: scaleY(1.0);
    -webkit-transform: scaleY(1.0);
  }
}

#lastupdate_text{
    font-size: 16px;
    margin-left: 10px;
    float: left;
}

.lastupdate{
  color: #8a8a8a;
  background: #e6e6e6;
  margin-left: -8px;
  margin-right: -8px;
  margin-top: -8px;
  font-family: 'Montserrat', sans-serif;
  font-size: 10px;
  text-align: center;
  padding-bottom: 2px;
  padding-top: 2px;
  border-bottom: 1px solid #cccccc;
}
.header {
  padding: 4px;
  background-color: #fafafa;
  margin-bottom: 10px;
  -webkit-box-shadow: 0 5px 8px -6px rgba(0,0,0,.2);
     -moz-box-shadow: 0 5px 8px -6px rgba(0,0,0,.2);
          box-shadow: 0 5px 8px -6px rgba(0,0,0,.2);
}
.header-text{
  color: #44c497;
  font-weight: bold;
  font-family: 'Montserrat', sans-serif;
}
.header-border{
  padding-bottom: 2px;
  margin-bottom: -4px;
  margin-left: -4px;
  margin-right: -4px;
  background: #2fc627; /* Old browsers */
  background: -moz-linear-gradient(left, #2fc627 0%, #44c497 47%); /* FF3.6-15 */
  background: -webkit-linear-gradient(left, #2fc627 0%,#44c497 47%); /* Chrome10-25,Safari5.1-6 */
  background: linear-gradient(to right, #2fc627 0%,#44c497 47%);
}

.bookings{
  padding: 4px;
  background-color: #fafafa;
  margin-bottom: 10px;
  margin-top: 5px;
  -webkit-box-shadow: 0 5px 8px -6px rgba(0,0,0,.2);
     -moz-box-shadow: 0 5px 8px -6px rgba(0,0,0,.2);
          box-shadow: 0 5px 8px -6px rgba(0,0,0,.2);
}
.bookings-text{
  color: #ce277a;
  font-weight: bold;
  font-family: 'Montserrat', sans-serif;
}
.bookings-border {
  padding-bottom: 2px;
  margin-bottom: -4px;
  margin-left: -4px;
  margin-right: -4px;
  background: #ff4e32; /* Old browsers */
  background: -moz-linear-gradient(left, #ff4e32 0%, #ce277a 60%, #e200df 100%); /* FF3.6-15 */
  background: -webkit-linear-gradient(left, #ff4e32 0%,#ce277a 60%,#e200df 100%);
  background: linear-gradient(to right, #ff4e32 0%,#ce277a 60%,#e200df 100%);
}
.notice {
    color: #656565;
    padding: 15px;
    padding-bottom: 5px;
    padding-top: 6px;
    background-color: #fafafa;
    border-left: 2px solid #7f7f84;
    margin-bottom: 8px;
    -webkit-box-shadow: 0 5px 8px -6px rgba(0,0,0,.2);
       -moz-box-shadow: 0 5px 8px -6px rgba(0,0,0,.2);
            box-shadow: 0 5px 8px -6px rgba(0,0,0,.2);
}
.button {
    border: none;
    color: white;
    padding: 3px 0px;
    width: 75px;
    text-align: center;
    text-decoration: none;
    display: inline-block;
    font-size: 17px;
    cursor:hand;
}
.button-book {
  background: #00c489;
  background: -moz-linear-gradient(left, #00c489 0%, #00d8c6 100%);
  background: -webkit-linear-gradient(left, #00c489 0%,#00d8c6 100%);
  background: linear-gradient(to right, #00c489 0%,#00d8c6 100%);
  border-radius: 3px;
  border: 1px solid #54c7a3;
}
.button-cancel{
  background: #fc3232;
  background: -moz-linear-gradient(left, #fc3232 0%, #ea0069 100%);
  background: -webkit-linear-gradient(left, #fc3232 0%,#ea0069 100%);
  background: linear-gradient(to right, #fc3232 0%,#ea0069 100%);
  border-radius: 3px;
  border: 1px solid #fb2f35;
}
.button-cancel-disabled{
  background-color: #bbbbbb;
  border: 1px solid #adadad;
  border-radius: 3px;
}
.div-left{
  font-family: 'Roboto', sans-serif;
  margin-top: 4px;
  float:left;
}
.div-right{
  float:right;
}
</style>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script>
    function reload(){
        $('#reload').toggle();
        $('.spinner').toggle();
        $('#lastupdate_text').toggle();
        $.get('/update', function(response){
            location.reload();
        });
    }
</script>

<body>
  <div class="lastupdate"><span id="lastupdate_text">Last update: {{last_bookings_update}}</span> <span id="reload"><a href="#" onclick="reload()">Reload</a></span>
<div style="clear: both;"></div>
<div class="spinner">
<div class="rect1"></div>
<div class="rect2"></div>
<div class="rect3"></div>
<div class="rect4"></div>
<div class="rect5"></div>
</div></div>
  <div class="container">
      {% if userbookings %}
      <div class="bookings">
        <div class="bookings-text">Bookings</div>
        <div class="bookings-border"></div>
      </div>
      {% endif %}
      {% for b in userbookings %}
      <div class="notice">
        <div class="div-left">{{ b['datetime'] }} Bana {{ b['lane'] }}</div>
        {% if b['bookid'] %}
        <div class="div-right"><a href="/debook/{{ b['nick'] }}/{{ b['bookid'] }}"><button type="button" class="button button-cancel">Fuck it!</button></a></div>
        {% else %}
        <button type="button" class="button button-cancel-disabled" disabled>Debook not avaliable yet</button></a></div>
        {% endif %}
        <div class="spacer" style="clear: both;"></div>
      </div>
      {% endfor %}
      {% for b in booking %}
        {% if b['header'] %}
        <div class="header">
          <div class="header-text">{{ b['header'] }}</div>
          <div class="header-border"></div>
        </div>
        {% endif %}
      <div class="notice">
        <div class="div-left">{{ b['line'] }}</div>
        <div class="div-right"><a href="{{ b['link'] }}"><button type="button" class="button button-book">Book</button></a></div>
        <div class="spacer" style="clear: both;"></div>
      </div>
      {% endfor %}
  </div>

</body>
</html>
